<tl-error-message></tl-error-message>

<mat-card class="main-content small-content">
  <mat-card-title>Registrieren</mat-card-title>
  <mat-card-content>
    <form [formGroup]="registerForm" (ngSubmit)="submitRegister()">

      <br>
      <div formGroupName="login">
        <mat-form-field>
          <mat-label>E-Mail</mat-label>
          <input matInput type="text" formControlName="email" name="email" required>
          <mat-error *ngIf="submitted && registerForm.get('login.email').errors">
            <div *ngIf="registerForm.get('login.email').errors.required">
              Die E-Mail ist ein Pflichtfeld!
            </div>
            <div *ngIf="registerForm.get('login.email').errors.email">
              Entspricht keiner gültigen E-Mail Adresse!
            </div>
          </mat-error>
        </mat-form-field>

        <br>
        <mat-form-field>
          <mat-label>Passwort</mat-label>
          <input matInput type="password" name="password" formControlName="password">
          <mat-error *ngIf="submitted && registerForm.get('login.password').errors">
            <div *ngIf="registerForm.get('login.password').errors.required">
              Das Passwort ist ein Pflichtfeld!
            </div>
            <div *ngIf="registerForm.get('login.password').errors.minlength">
              Das Passwort muss mindestens 8 Zeichen lang sein!
            </div>
          </mat-error>
        </mat-form-field>

        <br>
        <mat-form-field>
          <mat-label>Passwort wiederholen</mat-label>
          <input matInput type="password" name="passwordRepeat" formControlName="passwordRepeat">
          <mat-error *ngIf="submitted && registerForm.get('login.passwordRepeat').errors">
            <div *ngIf="registerForm.get('login.passwordRepeat').errors.required">
              Passwort wiederholen ist ein Pflichtfeld!
            </div>
            <div *ngIf="registerForm.get('login.passwordRepeat').errors.minlength">
              Passwort wiederholen muss mindestens 8 Zeichen lang sein!
            </div>
            <div *ngIf="registerForm.get('login.passwordRepeat').errors.mustMatch">
              Passwort wiederholen muss mit dem Passwort übereinstimmen!
            </div>
          </mat-error>
        </mat-form-field>
      </div>

      <br>
      <mat-form-field>
        <mat-label>Vorname</mat-label>
        <input matInput type="text" name="firstname" formControlName="firstname">
        <mat-error *ngIf="submitted && registerForm.get('firstname').errors">
          <div *ngIf="registerForm.get('firstname').errors.required">
            Der Vorname ist ein Pflichtfeld!
          </div>
        </mat-error>
      </mat-form-field>

      <br>
      <mat-form-field>
        <mat-label>Nachname</mat-label>
        <input matInput type="text" name="lastname" formControlName="lastname">
        <mat-error *ngIf="submitted && registerForm.get('lastname').errors">
          <div *ngIf="registerForm.get('lastname').errors.required">
            Der Nachname ist ein Pflichtfeld!
          </div>
        </mat-error>
      </mat-form-field>

      <br>
      <div formGroupName="address">
        <mat-form-field>
          <mat-label>Straße</mat-label>
          <input matInput type="text" name="street" formControlName="street">
          <mat-error *ngIf="submitted && registerForm.get('address.street').errors">
            <div *ngIf="registerForm.get('address.street').errors.required">
              Die Straße ist ein Pflichtfeld!
            </div>
          </mat-error>
        </mat-form-field>

        <br>
        <mat-form-field>
          <mat-label>Hausnummer</mat-label>
          <input matInput type="text" name="housenr" formControlName="housenr">
          <mat-error *ngIf="submitted && registerForm.get('address.housenr').errors">
            <div *ngIf="registerForm.get('address.housenr').errors.required">
              Die Hausnummer ist ein Pflichtfeld!
            </div>
          </mat-error>
        </mat-form-field>

        <br>
        <mat-form-field>
          <mat-label>PLZ</mat-label>
          <input matInput type="text" name="postalcode" formControlName="postalcode">
          <mat-error *ngIf="submitted && registerForm.get('address.postalcode').errors">
            <div *ngIf="registerForm.get('address.postalcode').errors.required">
              Die PLZ ist ein Pflichtfeld!
            </div>
          </mat-error>
        </mat-form-field>

        <br>
        <mat-form-field>
          <mat-label>Stadt</mat-label>
          <input matInput type="text" name="city" formControlName="city" >
          <mat-error *ngIf="submitted && registerForm.get('address.city').errors">
            <div *ngIf="registerForm.get('address.city').errors.required">
              Die Stadt ist ein Pflichtfeld!
            </div>
          </mat-error>
        </mat-form-field>

        <br>
        <mat-form-field>
          <mat-label>Staat</mat-label>
          <input matInput type="text" name="country" formControlName="country">
          <mat-error *ngIf="submitted && registerForm.get('address.country').errors">
            <div *ngIf="registerForm.get('address.country').errors.required">
              Der Staat ist ein Pflichtfeld!
            </div>
          </mat-error>
        </mat-form-field>

      </div>

      <button mat-raised-button color="primary" type="submit" [disabled]="submitted && !registerForm.valid">
        Registrieren
      </button>
    </form>

  </mat-card-content>
</mat-card>
